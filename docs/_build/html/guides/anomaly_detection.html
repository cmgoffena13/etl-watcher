

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Anomaly Detection &mdash; Watcher 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/tabs.js?v=3030b3cb"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Custom Database Querying" href="custom_querying.html" />
    <link rel="prev" title="Address Lineage" href="address_lineage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Watcher
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/installation.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/installation.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/installation.html#installation-steps">Installation Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/installation.html#verification">Verification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/quick_start.html">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#step-1-create-your-first-pipeline">Step 1: Create Your First Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#step-2-start-a-pipeline-execution">Step 2: Start a Pipeline Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#step-3-create-address-lineage">Step 3: Create Address Lineage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#step-4-set-up-monitoring">Step 4: Set Up Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#step-5-configure-anomaly-detection">Step 5: Configure Anomaly Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#step-6-web-pages">Step 6: Web Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/configuration.html#environment-variables">Environment Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/configuration.html#development-environment">Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/configuration.html#production-environment">Production Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/configuration.html#database-configuration">Database Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/configuration.html#connection-pool-default-settings">Connection Pool Default Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/configuration.html#redis-configuration">Redis Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/configuration.html#connection-default-settings">Connection Default Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/configuration.html#celery-default-configuration">Celery Default Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/configuration.html#monitoring-configuration">Monitoring Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/configuration.html#logfire-integration">Logfire Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/configuration.html#slack-notifications">Slack Notifications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/configuration.html#feature-flags">Feature Flags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/configuration.html#auto-create-anomaly-detection-rules">Auto-Create Anomaly Detection Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/configuration.html#profiling">Profiling</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/endpoints.html">API Endpoints</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#pipeline-management">Pipeline Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#create-or-get-pipeline">Create or Get Pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#list-pipelines">List Pipelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#get-pipeline-by-id">Get Pipeline by ID</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#update-pipeline">Update Pipeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#pipeline-execution">Pipeline Execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#start-pipeline-execution">Start Pipeline Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#end-pipeline-execution">End Pipeline Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#pipeline-types">Pipeline Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#create-or-get-pipeline-type">Create or Get Pipeline Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#list-pipeline-types">List Pipeline Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#get-pipeline-type-by-id">Get Pipeline Type by ID</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#address-management">Address Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#create-or-get-address">Create or Get Address</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#list-addresses">List Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#get-address-by-id">Get Address by ID</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#update-address">Update Address</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#address-types">Address Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#create-or-get-address-type">Create or Get Address Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#list-address-types">List Address Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#get-address-type-by-id">Get Address Type by ID</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#address-lineage">Address Lineage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#create-address-lineage">Create Address Lineage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#get-address-lineage">Get Address Lineage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#anomaly-detection">Anomaly Detection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#create-or-get-anomaly-detection-rule">Create or Get Anomaly Detection Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#list-anomaly-detection-rules">List Anomaly Detection Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#get-anomaly-detection-rule-by-id">Get Anomaly Detection Rule by ID</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#update-anomaly-detection-rule">Update Anomaly Detection Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#unflag-anomalies">Unflag Anomalies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#monitoring-health">Monitoring &amp; Health</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#check-timeliness">Check Timeliness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#check-freshness">Check Freshness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#log-cleanup">Log Cleanup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#celery-queue-monitoring">Celery Queue Monitoring</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#diagnostics-web-page">Diagnostics Web Page</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#system-diagnostics">System Diagnostics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#reporting-dashboard-web-page">Reporting Dashboard Web Page</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#pipeline-performance-dashboard">Pipeline Performance Dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/endpoints.html#interactive-api-documentation">Interactive API Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/endpoints.html#scalar-api-documentation">Scalar API Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/models.html">Pydantic Data Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#pipeline-models">Pipeline Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#pipelinepostinput">PipelinePostInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#pipelinepostoutput">PipelinePostOutput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#pipelinepatchinput">PipelinePatchInput</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#pipeline-type-models">Pipeline Type Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#pipelinetypepostinput">PipelineTypePostInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#pipelinetypepostoutput">PipelineTypePostOutput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#pipelinetypepatchinput">PipelineTypePatchInput</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#pipeline-execution-models">Pipeline Execution Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#pipelineexecutionstartinput">PipelineExecutionStartInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#pipelineexecutionstartoutput">PipelineExecutionStartOutput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#pipelineexecutionendinput">PipelineExecutionEndInput</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#address-models">Address Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresspostinput">AddressPostInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresspostoutput">AddressPostOutput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresspatchinput">AddressPatchInput</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#address-type-models">Address Type Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresstypepostinput">AddressTypePostInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresstypepostoutput">AddressTypePostOutput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresstypepatchinput">AddressTypePatchInput</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#address-lineage-models">Address Lineage Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresslineagepostinput">AddressLineagePostInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#sourceaddress">SourceAddress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#targetaddress">TargetAddress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresslineagepostoutput">AddressLineagePostOutput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresslineagegetoutput">AddressLineageGetOutput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#addresslineageclosuregetoutput">AddressLineageClosureGetOutput</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#anomaly-detection-models">Anomaly Detection Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#anomalydetectionrulepostinput">AnomalyDetectionRulePostInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#anomalydetectionrulepostoutput">AnomalyDetectionRulePostOutput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#anomalydetectionrulepatchinput">AnomalyDetectionRulePatchInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#unflaganomalyinput">UnflagAnomalyInput</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#monitoring-models">Monitoring Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#freshnesspostoutput">FreshnessPostOutput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#timelinesspostinput">TimelinessPostInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#timelinesspostoutput">TimelinessPostOutput</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#log-cleanup-models">Log Cleanup Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#logcleanuppostinput">LogCleanupPostInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#logcleanuppostoutput">LogCleanupPostOutput</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#enums">Enums</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#anomalymetricfieldenum">AnomalyMetricFieldEnum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html#datepartenum">DatePartEnum</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/models.html#validatormodel">ValidatorModel</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="address_lineage.html">Address Lineage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="address_lineage.html#understanding-address-lineage">Understanding Address Lineage</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_lineage.html#creating-lineage-relationships">Creating Lineage Relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_lineage.html#querying-lineage">Querying Lineage</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_lineage.html#closure-table-pattern">Closure Table Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_lineage.html#pipeline-integration">Pipeline Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_lineage.html#managing-load-lineage-flag">Managing Load Lineage Flag</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_lineage.html#naming-conventions">Naming Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_lineage.html#address-naming-convention">Address Naming Convention</a></li>
<li class="toctree-l2"><a class="reference internal" href="address_lineage.html#address-type-organization">Address Type Organization</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Anomaly Detection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-it-works">How It Works</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#statistical-analysis">Statistical Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supported-metrics">Supported Metrics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-anomaly-detection">Setting Up Anomaly Detection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-detection-rules">Creating Detection Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rule-configuration">Rule Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-rules">Multiple Rules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#automatic-execution">Automatic Execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#triggered-execution">Triggered Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#no-manual-triggering-required">No Manual Triggering Required</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#anomaly-results">Anomaly Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#understanding-results">Understanding Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#result-fields">Result Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#alert-notifications">Alert Notifications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#slack-alerts">Slack Alerts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alert-configuration">Alert Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#managing-anomalies">Managing Anomalies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#viewing-anomalies">Viewing Anomalies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-rules">Updating Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unflagging-anomalies">Unflagging Anomalies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adjusting-thresholds">Adjusting Thresholds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#understanding-the-data">Understanding the Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tuning-process">Tuning Process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Rule Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#threshold-selection">Threshold Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#monitoring-strategy">Monitoring Strategy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#common-scenarios">Common Scenarios</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-volume-anomalies">Data Volume Anomalies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-anomalies">Performance Anomalies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#throughput-anomalies">Throughput Anomalies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dml-operation-anomalies">DML Operation Anomalies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-configuration">Advanced Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#auto-creation-rules">Auto-Creation Rules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_querying.html">Custom Database Querying</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_querying.html#index-utilization-patterns">Index Utilization Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#date-based-queries">Date-Based Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#time-based-queries">Time-Based Queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="custom_querying.html#common-query-patterns">Common Query Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#pipeline-execution-analysis">Pipeline Execution Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#anomaly-detection-analysis">Anomaly Detection Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#lineage-analysis">Lineage Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#hierarchical-execution-analysis">Hierarchical Execution Analysis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="custom_querying.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#performance-considerations">Performance Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#query-optimization">Query Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#safety-guidelines">Safety Guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="custom_querying.html#common-use-cases">Common Use Cases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#reporting-and-analytics">Reporting and Analytics</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#daily-pipeline-report-materialized-view">Daily Pipeline Report Materialized View</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#operational-monitoring">Operational Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#data-quality-analysis">Data Quality Analysis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="custom_querying.html#advanced-patterns">Advanced Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="custom_querying.html#comparative-analysis">Comparative Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="etl_example.html">ETL Script Example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="etl_example.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="etl_example.html#etl-example-script">ETL Example Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="etl_example.html#key-features-demonstrated">Key Features Demonstrated</a></li>
<li class="toctree-l2"><a class="reference internal" href="etl_example.html#source-control-integration">Source Control Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="log_cleanup.html">Log Cleanup &amp; Maintenance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="log_cleanup.html#how-it-works">How It Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="log_cleanup.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="log_cleanup.html#api-usage">API Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="log_cleanup.html#cleanup-process">Cleanup Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="log_cleanup.html#scheduled-cleanup">Scheduled Cleanup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring &amp; Health Checks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html#freshness-monitoring">Freshness Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#purpose">Purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#supported-time-units">Supported Time Units</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#running-freshness-checks">Running Freshness Checks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html#timeliness-monitoring">Timeliness Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#id1">Purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#id2">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#running-timeliness-checks">Running Timeliness Checks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html#celery-queue-monitoring">Celery Queue Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#alert-thresholds">Alert Thresholds</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html#system-health-monitoring">System Health Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#diagnostics-dashboard">Diagnostics Dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#pipeline-reporting-dashboard">Pipeline Reporting Dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html#alerting-configuration">Alerting Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#slack-integration">Slack Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#alert-types">Alert Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html#monitoring-strategy">Monitoring Strategy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#scheduled-monitoring">Scheduled Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#monitoring-frequency">Monitoring Frequency</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html#load-testing">Load Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#trigger-load-tests">Trigger Load Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#load-test-scenarios">Load Test Scenarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html#performance-targets">Performance Targets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipeline_management.html">Pipeline Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pipeline_management.html#creating-pipelines">Creating Pipelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pipeline_management.html#basic-pipeline-creation">Basic Pipeline Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipeline_management.html#pipeline-configuration">Pipeline Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_management.html#managing-active-status">Managing Active Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_management.html#pipeline-execution">Pipeline Execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pipeline_management.html#starting-and-ending-executions">Starting and Ending Executions</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipeline_management.html#execution-patterns">Execution Patterns</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_management.html#pipeline-updates">Pipeline Updates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pipeline_management.html#common-update-scenarios">Common Update Scenarios</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_management.html#nested-pipeline-executions">Nested Pipeline Executions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pipeline_management.html#querying-nested-executions">Querying Nested Executions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_management.html#pipeline-organization">Pipeline Organization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pipeline_management.html#pipeline-type-organization">Pipeline Type Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipeline_management.html#pipeline-naming-convention">Pipeline Naming Convention</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="recommended_implementation.html">Recommended Implementation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="recommended_implementation.html#key-processes">Key Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="recommended_implementation.html#sync-pipeline-configuration">Sync Pipeline Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="recommended_implementation.html#watermark-management">Watermark Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="recommended_implementation.html#sync-address-lineage">Sync Address Lineage</a></li>
<li class="toctree-l2"><a class="reference internal" href="recommended_implementation.html#pipeline-execution">Pipeline Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="recommended_implementation.html#example-implementation">Example Implementation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="watermark_management.html">Watermark Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="watermark_management.html#understanding-watermarks">Understanding Watermarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="watermark_management.html#watermark-patterns">Watermark Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="watermark_management.html#watermark-increment-logic">Watermark Increment Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="watermark_management.html#how-to-use-watermarks">How to Use Watermarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="watermark_management.html#practical-example">Practical Example</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/architecture.html">Architecture &amp; Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/architecture.html#design-philosophy">Design Philosophy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/architecture.html#configuration-as-code">Configuration as Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/architecture.html#efficiency-performance">Efficiency &amp; Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/architecture.html#scalability">Scalability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/architecture.html#reliability">Reliability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/architecture.html#observability">Observability</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/architecture.html#high-level-architecture">High-Level Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/architecture.html#fastapi-framework">FastAPI Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/architecture.html#postgresql-database">PostgreSQL Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/architecture.html#celery-background-processing">Celery Background Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/architecture.html#redis-message-broker">Redis Message Broker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/architecture.html#docker-containerization">Docker Containerization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/architecture.html#logfire-integration">Logfire Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/architecture.html#performance-design-goals">Performance Design Goals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/celery_tasks.html">Celery Tasks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery_tasks.html#task-types">Task Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#detect-anomalies-task">detect_anomalies_task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#freshness-check-task">freshness_check_task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#timeliness-check-task">timeliness_check_task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#address-lineage-closure-rebuild-task">address_lineage_closure_rebuild_task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#pipeline-execution-closure-maintain-task">pipeline_execution_closure_maintain_task</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery_tasks.html#task-configuration">Task Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#rate-limiting">Rate Limiting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#retry-policies">Retry Policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery_tasks.html#task-monitoring">Task Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#task-status-tracking">Task Status Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#progress-updates">Progress Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/celery_tasks.html#error-details">Error Details</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/database_schema.html">Database Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/database_schema.html#core-tables">Core Tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#pipeline">Pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#pipeline-type">Pipeline Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#pipeline-execution">Pipeline Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#pipeline-execution-closure">Pipeline Execution Closure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#address">Address</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#address-type">Address Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#address-lineage">Address Lineage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#address-lineage-closure">Address Lineage Closure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/database_schema.html#monitoring-tables">Monitoring Tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#timeliness-pipeline-execution-log">Timeliness Pipeline Execution Log</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#freshness-pipeline-log">Freshness Pipeline Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/database_schema.html#anomaly-detection">Anomaly Detection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#anomaly-detection-rule">Anomaly Detection Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#anomaly-detection-result">Anomaly Detection Result</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/database_schema.html#data-relationships">Data Relationships</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#hierarchical-relationships">Hierarchical Relationships</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/database_schema.html#many-to-many-relationships">Many-to-Many Relationships</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Watcher</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Anomaly Detection</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guides/anomaly_detection.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="anomaly-detection">
<h1>Anomaly Detection<a class="headerlink" href="#anomaly-detection" title="Link to this heading"></a></h1>
<p>This guide covers how to set up and use anomaly detection in Watcher.
Watcher’s anomaly detection system uses statistical analysis to identify unusual patterns
in pipeline execution metrics. It automatically runs after each successful pipeline execution
and can detect anomalies in various metrics like execution time, row counts, and throughput.</p>
<section id="how-it-works">
<h2>How It Works<a class="headerlink" href="#how-it-works" title="Link to this heading"></a></h2>
<section id="statistical-analysis">
<h3>Statistical Analysis<a class="headerlink" href="#statistical-analysis" title="Link to this heading"></a></h3>
<p>The anomaly detection system uses z-score analysis:</p>
<ol class="arabic simple">
<li><p><strong>Baseline Calculation</strong> Analyzes historical execution data</p></li>
<li><p><strong>Statistical Metrics</strong> Calculates mean and standard deviation</p></li>
<li><p><strong>Z-Score Calculation</strong> Determines how many standard deviations a value is from the mean</p></li>
<li><p><strong>Threshold Comparison</strong> Compares z-score against configured threshold</p></li>
<li><p><strong>Anomaly Detection</strong> Flags values that exceed the threshold</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The system only compares successful executions that occurred during the same hour of day (e.g., 2 PM vs 2 PM)
to account for daily patterns, business hours, and data processing cycles.
This ensures more accurate anomaly detection by comparing like-with-like time periods.</p>
</div>
</section>
<section id="supported-metrics">
<h3>Supported Metrics<a class="headerlink" href="#supported-metrics" title="Link to this heading"></a></h3>
<p>Monitor various pipeline execution metrics:</p>
<ul class="simple">
<li><p><strong>total_rows</strong> Total number of rows processed</p></li>
<li><p><strong>duration_seconds</strong> Execution duration in seconds</p></li>
<li><p><strong>throughput</strong> Rows processed per second</p></li>
<li><p><strong>inserts</strong> Number of insert operations</p></li>
<li><p><strong>updates</strong> Number of update operations</p></li>
<li><p><strong>soft_deletes</strong> Number of soft delete operations</p></li>
</ul>
</section>
</section>
<section id="setting-up-anomaly-detection">
<h2>Setting Up Anomaly Detection<a class="headerlink" href="#setting-up-anomaly-detection" title="Link to this heading"></a></h2>
<section id="creating-detection-rules">
<h3>Creating Detection Rules<a class="headerlink" href="#creating-detection-rules" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can enable automatic creation of anomaly detection rules
by setting the <code class="docutils literal notranslate"><span class="pre">WATCHER_AUTO_CREATE_ANOMALY_DETECTION_RULES</span></code> environment variable to
<code class="docutils literal notranslate"><span class="pre">true</span></code>. This will automatically create all rules for a pipeline when it is created.</p>
</div>
<ol class="arabic">
<li><p><strong>Create an anomaly detection rule</strong></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Python</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">curl</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Go</button><button aria-controls="panel-0-0-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-3" name="0-3" role="tab" tabindex="-1">Scala</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">httpx</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;pipeline_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;metric_field&quot;</span><span class="p">:</span> <span class="s2">&quot;total_rows&quot;</span><span class="p">,</span>
        <span class="s2">&quot;z_threshold&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="s2">&quot;lookback_days&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="s2">&quot;minimum_executions&quot;</span><span class="p">:</span> <span class="mi">30</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">       &quot;pipeline_id&quot;: 1,</span>
<span class="s1">       &quot;metric_field&quot;: &quot;total_rows&quot;,</span>
<span class="s1">       &quot;z_threshold&quot;: 3.0,</span>
<span class="s1">       &quot;lookback_days&quot;: 30,</span>
<span class="s1">       &quot;minimum_executions&quot;: 30</span>
<span class="s1">     }&#39;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;bytes&quot;</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">AnomalyRule</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">PipelineID</span><span class="w">        </span><span class="kt">int</span><span class="w">     </span><span class="s">`json:&quot;pipeline_id&quot;`</span>
<span class="w">    </span><span class="nx">MetricField</span><span class="w">       </span><span class="kt">string</span><span class="w">  </span><span class="s">`json:&quot;metric_field&quot;`</span>
<span class="w">    </span><span class="nx">ZThreshold</span><span class="w">        </span><span class="kt">float64</span><span class="w"> </span><span class="s">`json:&quot;z_threshold&quot;`</span>
<span class="w">    </span><span class="nx">LookbackDays</span><span class="w">      </span><span class="kt">int</span><span class="w">     </span><span class="s">`json:&quot;lookback_days&quot;`</span>
<span class="w">    </span><span class="nx">MinimumExecutions</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="s">`json:&quot;minimum_executions&quot;`</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">data</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">AnomalyRule</span><span class="p">{</span>
<span class="w">        </span><span class="nx">PipelineID</span><span class="p">:</span><span class="w">        </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nx">MetricField</span><span class="p">:</span><span class="w">       </span><span class="s">&quot;total_rows&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">ZThreshold</span><span class="p">:</span><span class="w">        </span><span class="mf">3.0</span><span class="p">,</span>
<span class="w">        </span><span class="nx">LookbackDays</span><span class="p">:</span><span class="w">      </span><span class="mi">30</span><span class="p">,</span>
<span class="w">        </span><span class="nx">MinimumExecutions</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">jsonData</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
<span class="w">    </span><span class="nx">resp</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">Post</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;application/json&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bytes</span><span class="p">.</span><span class="nx">NewBuffer</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">))</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>
<span class="w">    </span><span class="nx">json</span><span class="p">.</span><span class="nx">NewDecoder</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">).</span><span class="nx">Decode</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">result</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-3" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0"><div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nn">http</span><span class="p">.{</span><span class="nc">HttpClient</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpResponse</span><span class="p">}</span>
<span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nc">URI</span>
<span class="k">import</span><span class="w"> </span><span class="nn">play</span><span class="p">.</span><span class="nn">api</span><span class="p">.</span><span class="nn">libs</span><span class="p">.</span><span class="nn">json</span><span class="p">.</span><span class="nc">Json</span>

<span class="k">object</span><span class="w"> </span><span class="nc">AnomalyRuleExample</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span><span class="w"> </span><span class="nc">Array</span><span class="p">[</span><span class="nc">String</span><span class="p">]):</span><span class="w"> </span><span class="nc">Unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpClient</span><span class="p">.</span><span class="n">newHttpClient</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Json</span><span class="p">.</span><span class="n">obj</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;pipeline_id&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;metric_field&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;total_rows&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;z_threshold&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;lookback_days&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;minimum_executions&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">30</span>
<span class="w">        </span><span class="p">).</span><span class="n">toString</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">.</span><span class="n">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="n">uri</span><span class="p">(</span><span class="nc">URI</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="n">header</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nc">POST</span><span class="p">(</span><span class="nc">HttpRequest</span><span class="p">.</span><span class="nc">BodyPublishers</span><span class="p">.</span><span class="n">ofString</span><span class="p">(</span><span class="n">json</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="n">build</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
<span class="w">            </span><span class="nc">HttpResponse</span><span class="p">.</span><span class="nc">BodyHandlers</span><span class="p">.</span><span class="n">ofString</span><span class="p">())</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
</li>
<li><p><strong>Response</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;pipeline_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metric_field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total_rows&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;z_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;lookback_days&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;minimum_executions&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;active&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-01T10:00:00Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;updated_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="rule-configuration">
<h3>Rule Configuration<a class="headerlink" href="#rule-configuration" title="Link to this heading"></a></h3>
<p><strong>Pipeline ID</strong> The pipeline to monitor for anomalies</p>
<p><strong>Metric Field</strong> The specific metric to analyze:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">total_rows</span></code>: Monitor row count variations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">duration_seconds</span></code>: Monitor execution time variations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">throughput</span></code>: Monitor processing speed variations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inserts</span></code>: Monitor insert operation variations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">updates</span></code>: Monitor update operation variations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">soft_deletes</span></code>: Monitor soft delete variations</p></li>
</ul>
<p><strong>Z-Threshold</strong> Sensitivity of anomaly detection:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1.5</span></code>: Very sensitive (catches minor variations)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2.0</span></code>: Standard sensitivity (recommended)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2.5</span></code>: Less sensitive (catches major variations)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3.0</span></code>: Very conservative (catches only extreme anomalies)</p></li>
</ul>
<p><strong>Minimum Executions</strong> Number of historical executions needed before analysis:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">5</span></code>: Minimum for basic analysis (would not recommend this)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">30</span></code>: Recommended for stable baselines</p></li>
</ul>
</section>
<section id="multiple-rules">
<h3>Multiple Rules<a class="headerlink" href="#multiple-rules" title="Link to this heading"></a></h3>
<p>Create multiple rules for comprehensive monitoring:</p>
<blockquote>
<div><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">Python</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">curl</button><button aria-controls="panel-1-1-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-2" name="1-2" role="tab" tabindex="-1">Go</button><button aria-controls="panel-1-1-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-3" name="1-3" role="tab" tabindex="-1">Scala</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">httpx</span>

<span class="c1"># Define rules to create</span>
<span class="n">rules</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;pipeline_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;metric_field&quot;</span><span class="p">:</span> <span class="s2">&quot;total_rows&quot;</span><span class="p">,</span>
        <span class="s2">&quot;z_threshold&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="s2">&quot;lookback_days&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="s2">&quot;minimum_executions&quot;</span><span class="p">:</span> <span class="mi">5</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;pipeline_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;metric_field&quot;</span><span class="p">:</span> <span class="s2">&quot;duration_seconds&quot;</span><span class="p">,</span>
        <span class="s2">&quot;z_threshold&quot;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
        <span class="s2">&quot;lookback_days&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="s2">&quot;minimum_executions&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;pipeline_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;metric_field&quot;</span><span class="p">:</span> <span class="s2">&quot;throughput&quot;</span><span class="p">,</span>
        <span class="s2">&quot;z_threshold&quot;</span><span class="p">:</span> <span class="mf">1.8</span><span class="p">,</span>
        <span class="s2">&quot;lookback_days&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="s2">&quot;minimum_executions&quot;</span><span class="p">:</span> <span class="mi">8</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="c1"># Create all rules</span>
<span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">,</span>
        <span class="n">json</span><span class="o">=</span><span class="n">rule</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rule</span><span class="p">[</span><span class="s1">&#39;metric_field&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> rule:&quot;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Monitor row count anomalies</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">       &quot;pipeline_id&quot;: 1,</span>
<span class="s1">       &quot;metric_field&quot;: &quot;total_rows&quot;,</span>
<span class="s1">       &quot;z_threshold&quot;: 3.0,</span>
<span class="s1">       &quot;lookback_days&quot;: 30,</span>
<span class="s1">       &quot;minimum_executions&quot;: 30</span>
<span class="s1">     }&#39;</span>

<span class="c1"># Monitor execution time anomalies</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">       &quot;pipeline_id&quot;: 1,</span>
<span class="s1">       &quot;metric_field&quot;: &quot;duration_seconds&quot;,</span>
<span class="s1">       &quot;z_threshold&quot;: 3.0,</span>
<span class="s1">       &quot;lookback_days&quot;: 30,</span>
<span class="s1">       &quot;minimum_executions&quot;: 30</span>
<span class="s1">     }&#39;</span>

<span class="c1"># Monitor throughput anomalies</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">       &quot;pipeline_id&quot;: 1,</span>
<span class="s1">       &quot;metric_field&quot;: &quot;throughput&quot;,</span>
<span class="s1">       &quot;z_threshold&quot;: 3.0,</span>
<span class="s1">       &quot;lookback_days&quot;: 30,</span>
<span class="s1">       &quot;minimum_executions&quot;: 30</span>
<span class="s1">     }&#39;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-2" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-2" name="1-2" role="tabpanel" tabindex="0"><div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;bytes&quot;</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">AnomalyRule</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">PipelineID</span><span class="w">        </span><span class="kt">int</span><span class="w">     </span><span class="s">`json:&quot;pipeline_id&quot;`</span>
<span class="w">    </span><span class="nx">MetricField</span><span class="w">       </span><span class="kt">string</span><span class="w">  </span><span class="s">`json:&quot;metric_field&quot;`</span>
<span class="w">    </span><span class="nx">ZThreshold</span><span class="w">        </span><span class="kt">float64</span><span class="w"> </span><span class="s">`json:&quot;z_threshold&quot;`</span>
<span class="w">    </span><span class="nx">LookbackDays</span><span class="w">      </span><span class="kt">int</span><span class="w">     </span><span class="s">`json:&quot;lookback_days&quot;`</span>
<span class="w">    </span><span class="nx">MinimumExecutions</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="s">`json:&quot;minimum_executions&quot;`</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">rules</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="nx">AnomalyRule</span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;total_rows&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;duration_seconds&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">2.5</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;throughput&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">1.8</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">rule</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">rules</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">jsonData</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">rule</span><span class="p">)</span>
<span class="w">        </span><span class="nx">resp</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">Post</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;application/json&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bytes</span><span class="p">.</span><span class="nx">NewBuffer</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">))</span>
<span class="w">        </span><span class="k">defer</span><span class="w"> </span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>

<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>
<span class="w">        </span><span class="nx">json</span><span class="p">.</span><span class="nx">NewDecoder</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">).</span><span class="nx">Decode</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">result</span><span class="p">)</span>
<span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%s rule: %v\n&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">rule</span><span class="p">.</span><span class="nx">MetricField</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-1-3" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-3" name="1-3" role="tabpanel" tabindex="0"><div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nn">http</span><span class="p">.{</span><span class="nc">HttpClient</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpResponse</span><span class="p">}</span>
<span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nc">URI</span>
<span class="k">import</span><span class="w"> </span><span class="nn">play</span><span class="p">.</span><span class="nn">api</span><span class="p">.</span><span class="nn">libs</span><span class="p">.</span><span class="nn">json</span><span class="p">.</span><span class="nc">Json</span>

<span class="k">object</span><span class="w"> </span><span class="nc">MultipleRulesExample</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span><span class="w"> </span><span class="nc">Array</span><span class="p">[</span><span class="nc">String</span><span class="p">]):</span><span class="w"> </span><span class="nc">Unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpClient</span><span class="p">.</span><span class="n">newHttpClient</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">rules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">List</span><span class="p">(</span>
<span class="w">            </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;total_rows&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">),</span>
<span class="w">            </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;duration_seconds&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">2.5</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">),</span>
<span class="w">            </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;throughput&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">1.8</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>

<span class="w">        </span><span class="n">rules</span><span class="p">.</span><span class="n">foreach</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="n">pipelineId</span><span class="p">,</span><span class="w"> </span><span class="n">metricField</span><span class="p">,</span><span class="w"> </span><span class="n">zThreshold</span><span class="p">,</span><span class="w"> </span><span class="n">lookbackDays</span><span class="p">,</span><span class="w"> </span><span class="n">minExec</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<span class="w">            </span><span class="kd">val</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Json</span><span class="p">.</span><span class="n">obj</span><span class="p">(</span>
<span class="w">                </span><span class="s">&quot;pipeline_id&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">pipelineId</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;metric_field&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">metricField</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;z_threshold&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">zThreshold</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;lookback_days&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">lookbackDays</span><span class="p">,</span>
<span class="w">                </span><span class="s">&quot;minimum_executions&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">minExec</span>
<span class="w">            </span><span class="p">).</span><span class="n">toString</span><span class="p">()</span>

<span class="w">            </span><span class="kd">val</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">.</span><span class="n">newBuilder</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="n">uri</span><span class="p">(</span><span class="nc">URI</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="n">header</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="nc">POST</span><span class="p">(</span><span class="nc">HttpRequest</span><span class="p">.</span><span class="nc">BodyPublishers</span><span class="p">.</span><span class="n">ofString</span><span class="p">(</span><span class="n">json</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="n">build</span><span class="p">()</span>

<span class="w">            </span><span class="kd">val</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
<span class="w">                </span><span class="nc">HttpResponse</span><span class="p">.</span><span class="nc">BodyHandlers</span><span class="p">.</span><span class="n">ofString</span><span class="p">())</span>
<span class="w">            </span><span class="n">println</span><span class="p">(</span><span class="s">s&quot;</span><span class="si">$</span><span class="n">metricField</span><span class="s"> rule: </span><span class="si">${</span><span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">()</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
</div></blockquote>
</section>
</section>
<section id="automatic-execution">
<h2>Automatic Execution<a class="headerlink" href="#automatic-execution" title="Link to this heading"></a></h2>
<section id="triggered-execution">
<h3>Triggered Execution<a class="headerlink" href="#triggered-execution" title="Link to this heading"></a></h3>
<p>Anomaly detection runs automatically after each successful pipeline execution:</p>
<ol class="arabic simple">
<li><p><strong>Pipeline execution completes successfully</strong></p></li>
<li><p><strong>System checks for active anomaly detection rules</strong></p></li>
<li><p><strong>For each rule, analyzes the execution metrics</strong></p></li>
<li><p><strong>Compares against historical baseline</strong></p></li>
<li><p><strong>Flags anomalies if detected</strong></p></li>
<li><p><strong>Sends alerts if anomalies are found</strong></p></li>
</ol>
</section>
<section id="no-manual-triggering-required">
<h3>No Manual Triggering Required<a class="headerlink" href="#no-manual-triggering-required" title="Link to this heading"></a></h3>
<p>Unlike monitoring checks, anomaly detection doesn’t require manual triggering:</p>
<ul class="simple">
<li><p><strong>Automatic</strong>: Runs after every successful execution</p></li>
<li><p><strong>Background</strong>: Processed by Celery workers</p></li>
<li><p><strong>Real-time</strong>: Results available immediately</p></li>
<li><p><strong>Persistent</strong>: Anomaly results stored in database</p></li>
</ul>
</section>
</section>
<section id="anomaly-results">
<h2>Anomaly Results<a class="headerlink" href="#anomaly-results" title="Link to this heading"></a></h2>
<section id="understanding-results">
<h3>Understanding Results<a class="headerlink" href="#understanding-results" title="Link to this heading"></a></h3>
<p>When an anomaly is detected, the system stores detailed information:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;pipeline_execution_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;rule_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;violation_value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">15000.0000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;z_score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.8000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;historical_mean&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">8000.0000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;std_deviation_value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2500.0000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;z_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;threshold_min_value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3000.0000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;threshold_max_value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">13000.0000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;context&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;lookback_days&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;minimum_executions&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;execution_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;detected_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-01T10:05:00Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="result-fields">
<h3>Result Fields<a class="headerlink" href="#result-fields" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>violation_value</strong>: The actual metric value that triggered the anomaly</p></li>
<li><p><strong>z_score</strong>: How many standard deviations from the mean</p></li>
<li><p><strong>historical_mean</strong>: Average value from historical data</p></li>
<li><p><strong>std_deviation_value</strong>: Standard deviation from historical data</p></li>
<li><p><strong>z_threshold</strong>: Configured threshold for this rule</p></li>
<li><p><strong>threshold_min_value</strong>: Minimum expected value</p></li>
<li><p><strong>threshold_max_value</strong>: Maximum expected value</p></li>
</ul>
</section>
</section>
<section id="alert-notifications">
<h2>Alert Notifications<a class="headerlink" href="#alert-notifications" title="Link to this heading"></a></h2>
<section id="slack-alerts">
<h3>Slack Alerts<a class="headerlink" href="#slack-alerts" title="Link to this heading"></a></h3>
<p>When anomalies are detected, Slack alerts are sent automatically:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>⚠️ WARNING
Anomaly Detection
Timestamp: 2025-01-09 20:30:45 UTC
Message: Anomalies Detected for Pipeline &#39;analytics_pipeline&#39; (ID: 123) - Execution ID 21 flagged

Details:
• Total Anomalies: 2
• Metrics: [&#39;duration_seconds&#39;, &#39;throughput&#39;]
• Anomalies:
     • duration_seconds: 4914 (Range: 0 - 4767)
     • throughput: 271.96 (Range: 0 - 250)
</pre></div>
</div>
</section>
<section id="alert-configuration">
<h3>Alert Configuration<a class="headerlink" href="#alert-configuration" title="Link to this heading"></a></h3>
<p>Configure Slack webhooks for alerts:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set Slack webhook URL</span>
<span class="nv">SLACK_WEBHOOK_URL</span><span class="o">=</span><span class="s2">&quot;https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="managing-anomalies">
<h2>Managing Anomalies<a class="headerlink" href="#managing-anomalies" title="Link to this heading"></a></h2>
<section id="viewing-anomalies">
<h3>Viewing Anomalies<a class="headerlink" href="#viewing-anomalies" title="Link to this heading"></a></h3>
<p>List all anomaly detection rules:</p>
<blockquote>
<div><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">Python</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">curl</button><button aria-controls="panel-2-2-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-2" name="2-2" role="tab" tabindex="-1">Go</button><button aria-controls="panel-2-2-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-3" name="2-3" role="tab" tabindex="-1">Scala</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">httpx</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span><span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-2-2" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-2" name="2-2" role="tabpanel" tabindex="0"><div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">resp</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">Get</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="p">[]</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>
<span class="w">    </span><span class="nx">json</span><span class="p">.</span><span class="nx">NewDecoder</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">).</span><span class="nx">Decode</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">result</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-2-3" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-3" name="2-3" role="tabpanel" tabindex="0"><div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nn">http</span><span class="p">.{</span><span class="nc">HttpClient</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpResponse</span><span class="p">}</span>
<span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nc">URI</span>

<span class="k">object</span><span class="w"> </span><span class="nc">GetRulesExample</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span><span class="w"> </span><span class="nc">Array</span><span class="p">[</span><span class="nc">String</span><span class="p">]):</span><span class="w"> </span><span class="nc">Unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpClient</span><span class="p">.</span><span class="n">newHttpClient</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">.</span><span class="n">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="n">uri</span><span class="p">(</span><span class="nc">URI</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="nc">GET</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="n">build</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
<span class="w">            </span><span class="nc">HttpResponse</span><span class="p">.</span><span class="nc">BodyHandlers</span><span class="p">.</span><span class="n">ofString</span><span class="p">())</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p><strong>Response:</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;pipeline_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;metric_field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total_rows&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;z_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;lookback_days&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;minimum_executions&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;active&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-01T10:00:00Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;updated_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Get specific rule details:</p>
<blockquote>
<div><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">Python</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">curl</button><button aria-controls="panel-3-3-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-2" name="3-2" role="tab" tabindex="-1">Go</button><button aria-controls="panel-3-3-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-3" name="3-3" role="tab" tabindex="-1">Scala</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">httpx</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://localhost:8000/anomaly_detection_rule/1&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span><span class="s2">&quot;http://localhost:8000/anomaly_detection_rule/1&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-3-2" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-2" name="3-2" role="tabpanel" tabindex="0"><div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">resp</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">Get</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule/1&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>
<span class="w">    </span><span class="nx">json</span><span class="p">.</span><span class="nx">NewDecoder</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">).</span><span class="nx">Decode</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">result</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-3-3" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-3" name="3-3" role="tabpanel" tabindex="0"><div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nn">http</span><span class="p">.{</span><span class="nc">HttpClient</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpResponse</span><span class="p">}</span>
<span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nc">URI</span>

<span class="k">object</span><span class="w"> </span><span class="nc">GetRuleExample</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span><span class="w"> </span><span class="nc">Array</span><span class="p">[</span><span class="nc">String</span><span class="p">]):</span><span class="w"> </span><span class="nc">Unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpClient</span><span class="p">.</span><span class="n">newHttpClient</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">.</span><span class="n">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="n">uri</span><span class="p">(</span><span class="nc">URI</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule/1&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="nc">GET</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="n">build</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
<span class="w">            </span><span class="nc">HttpResponse</span><span class="p">.</span><span class="nc">BodyHandlers</span><span class="p">.</span><span class="n">ofString</span><span class="p">())</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
</div></blockquote>
</section>
<section id="updating-rules">
<h3>Updating Rules<a class="headerlink" href="#updating-rules" title="Link to this heading"></a></h3>
<p>Update anomaly detection rules:</p>
<blockquote>
<div><p><strong>Response:</strong> Returns the complete updated rule (full AnomalyDetectionRule model)</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-4-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-4-4-0" name="4-0" role="tab" tabindex="0">Python</button><button aria-controls="panel-4-4-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-1" name="4-1" role="tab" tabindex="-1">curl</button><button aria-controls="panel-4-4-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-2" name="4-2" role="tab" tabindex="-1">Go</button><button aria-controls="panel-4-4-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-3" name="4-3" role="tab" tabindex="-1">Scala</button></div><div aria-labelledby="tab-4-4-0" class="sphinx-tabs-panel" id="panel-4-4-0" name="4-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">httpx</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span>
    <span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;z_threshold&quot;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
        <span class="s2">&quot;lookback_days&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="s2">&quot;minimum_executions&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-4-1" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-1" name="4-1" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>PATCH<span class="w"> </span><span class="s2">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">       &quot;id&quot;: 1,</span>
<span class="s1">       &quot;z_threshold&quot;: 2.5,</span>
<span class="s1">       &quot;lookback_days&quot;: 30,</span>
<span class="s1">       &quot;minimum_executions&quot;: 10</span>
<span class="s1">     }&#39;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-4-2" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-2" name="4-2" role="tabpanel" tabindex="0"><div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;bytes&quot;</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">RuleUpdate</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">ID</span><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="s">`json:&quot;id&quot;`</span>
<span class="w">    </span><span class="nx">ZThreshold</span><span class="w">        </span><span class="kt">float64</span><span class="w"> </span><span class="s">`json:&quot;z_threshold&quot;`</span>
<span class="w">    </span><span class="nx">LookbackDays</span><span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="s">`json:&quot;lookback_days&quot;`</span>
<span class="w">    </span><span class="nx">MinimumExecutions</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="s">`json:&quot;minimum_executions&quot;`</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">data</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">RuleUpdate</span><span class="p">{</span>
<span class="w">        </span><span class="nx">ID</span><span class="p">:</span><span class="w">                </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nx">ZThreshold</span><span class="p">:</span><span class="w">        </span><span class="mf">2.5</span><span class="p">,</span>
<span class="w">        </span><span class="nx">LookbackDays</span><span class="p">:</span><span class="w">      </span><span class="mi">30</span><span class="p">,</span>
<span class="w">        </span><span class="nx">MinimumExecutions</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">jsonData</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
<span class="w">    </span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">NewRequest</span><span class="p">(</span><span class="s">&quot;PATCH&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">bytes</span><span class="p">.</span><span class="nx">NewBuffer</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">))</span>
<span class="w">    </span><span class="nx">req</span><span class="p">.</span><span class="nx">Header</span><span class="p">.</span><span class="nx">Set</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">client</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">http</span><span class="p">.</span><span class="nx">Client</span><span class="p">{}</span>
<span class="w">    </span><span class="nx">resp</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">Do</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>

<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>
<span class="w">    </span><span class="nx">json</span><span class="p">.</span><span class="nx">NewDecoder</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">).</span><span class="nx">Decode</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">result</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-4-3" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-3" name="4-3" role="tabpanel" tabindex="0"><div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nn">http</span><span class="p">.{</span><span class="nc">HttpClient</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpResponse</span><span class="p">}</span>
<span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nc">URI</span>
<span class="k">import</span><span class="w"> </span><span class="nn">play</span><span class="p">.</span><span class="nn">api</span><span class="p">.</span><span class="nn">libs</span><span class="p">.</span><span class="nn">json</span><span class="p">.</span><span class="nc">Json</span>

<span class="k">object</span><span class="w"> </span><span class="nc">UpdateRuleExample</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span><span class="w"> </span><span class="nc">Array</span><span class="p">[</span><span class="nc">String</span><span class="p">]):</span><span class="w"> </span><span class="nc">Unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpClient</span><span class="p">.</span><span class="n">newHttpClient</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Json</span><span class="p">.</span><span class="n">obj</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;z_threshold&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mf">2.5</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;lookback_days&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;minimum_executions&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">10</span>
<span class="w">        </span><span class="p">).</span><span class="n">toString</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">.</span><span class="n">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="n">uri</span><span class="p">(</span><span class="nc">URI</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/anomaly_detection_rule&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="n">header</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="n">method</span><span class="p">(</span><span class="s">&quot;PATCH&quot;</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">.</span><span class="nc">BodyPublishers</span><span class="p">.</span><span class="n">ofString</span><span class="p">(</span><span class="n">json</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="n">build</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
<span class="w">            </span><span class="nc">HttpResponse</span><span class="p">.</span><span class="nc">BodyHandlers</span><span class="p">.</span><span class="n">ofString</span><span class="p">())</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">body</span><span class="p">())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p><strong>Response Example:</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;pipeline_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metric_field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total_rows&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;z_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;lookback_days&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;minimum_executions&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;active&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-01T10:00:00Z&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;updated_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-01T11:30:00Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="unflagging-anomalies">
<h3>Unflagging Anomalies<a class="headerlink" href="#unflagging-anomalies" title="Link to this heading"></a></h3>
<p>Unflag anomalies that are false positives:</p>
<blockquote>
<div><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-5-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-5-5-0" name="5-0" role="tab" tabindex="0">Python</button><button aria-controls="panel-5-5-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-5-5-1" name="5-1" role="tab" tabindex="-1">curl</button><button aria-controls="panel-5-5-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-5-5-2" name="5-2" role="tab" tabindex="-1">Go</button><button aria-controls="panel-5-5-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-5-5-3" name="5-3" role="tab" tabindex="-1">Scala</button></div><div aria-labelledby="tab-5-5-0" class="sphinx-tabs-panel" id="panel-5-5-0" name="5-0" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">httpx</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">httpx</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">&quot;http://localhost:8000/unflag_anomaly&quot;</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;pipeline_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;pipeline_execution_id&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
        <span class="s2">&quot;metric_field&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;total_rows&quot;</span><span class="p">,</span> <span class="s2">&quot;duration_seconds&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-5-1" class="sphinx-tabs-panel" hidden="true" id="panel-5-5-1" name="5-1" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/unflag_anomaly&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">       &quot;pipeline_id&quot;: 1,</span>
<span class="s1">       &quot;pipeline_execution_id&quot;: 123,</span>
<span class="s1">       &quot;metric_field&quot;: [&quot;total_rows&quot;, &quot;duration_seconds&quot;]</span>
<span class="s1">     }&#39;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-5-2" class="sphinx-tabs-panel" hidden="true" id="panel-5-5-2" name="5-2" role="tabpanel" tabindex="0"><div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;bytes&quot;</span>
<span class="w">    </span><span class="s">&quot;encoding/json&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>
<span class="w">    </span><span class="s">&quot;net/http&quot;</span>
<span class="p">)</span>

<span class="kd">type</span><span class="w"> </span><span class="nx">UnflagRequest</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">PipelineID</span><span class="w">        </span><span class="kt">int</span><span class="w">      </span><span class="s">`json:&quot;pipeline_id&quot;`</span>
<span class="w">    </span><span class="nx">PipelineExecutionID</span><span class="w"> </span><span class="kt">int</span><span class="w">    </span><span class="s">`json:&quot;pipeline_execution_id&quot;`</span>
<span class="w">    </span><span class="nx">MetricField</span><span class="w">       </span><span class="p">[]</span><span class="kt">string</span><span class="w"> </span><span class="s">`json:&quot;metric_field&quot;`</span>
<span class="p">}</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">data</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">UnflagRequest</span><span class="p">{</span>
<span class="w">        </span><span class="nx">PipelineID</span><span class="p">:</span><span class="w">        </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nx">PipelineExecutionID</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span>
<span class="w">        </span><span class="nx">MetricField</span><span class="p">:</span><span class="w">       </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;total_rows&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;duration_seconds&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">jsonData</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
<span class="w">    </span><span class="nx">resp</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">Post</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/unflag_anomaly&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;application/json&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bytes</span><span class="p">.</span><span class="nx">NewBuffer</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">))</span>
<span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">resp</span><span class="p">.</span><span class="nx">Body</span><span class="p">.</span><span class="nx">Close</span><span class="p">()</span>

<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">StatusCode</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-5-3" class="sphinx-tabs-panel" hidden="true" id="panel-5-5-3" name="5-3" role="tabpanel" tabindex="0"><div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nn">http</span><span class="p">.{</span><span class="nc">HttpClient</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">,</span><span class="w"> </span><span class="nc">HttpResponse</span><span class="p">}</span>
<span class="k">import</span><span class="w"> </span><span class="nn">java</span><span class="p">.</span><span class="nn">net</span><span class="p">.</span><span class="nc">URI</span>
<span class="k">import</span><span class="w"> </span><span class="nn">play</span><span class="p">.</span><span class="nn">api</span><span class="p">.</span><span class="nn">libs</span><span class="p">.</span><span class="nn">json</span><span class="p">.</span><span class="nc">Json</span>

<span class="k">object</span><span class="w"> </span><span class="nc">UnflagExample</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span><span class="w"> </span><span class="nc">Array</span><span class="p">[</span><span class="nc">String</span><span class="p">]):</span><span class="w"> </span><span class="nc">Unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpClient</span><span class="p">.</span><span class="n">newHttpClient</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Json</span><span class="p">.</span><span class="n">obj</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;pipeline_id&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;pipeline_execution_id&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;metric_field&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Json</span><span class="p">.</span><span class="n">arr</span><span class="p">(</span><span class="s">&quot;total_rows&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;duration_seconds&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">).</span><span class="n">toString</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">HttpRequest</span><span class="p">.</span><span class="n">newBuilder</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="n">uri</span><span class="p">(</span><span class="nc">URI</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="s">&quot;http://localhost:8000/unflag_anomaly&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="n">header</span><span class="p">(</span><span class="s">&quot;Content-Type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nc">POST</span><span class="p">(</span><span class="nc">HttpRequest</span><span class="p">.</span><span class="nc">BodyPublishers</span><span class="p">.</span><span class="n">ofString</span><span class="p">(</span><span class="n">json</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="n">build</span><span class="p">()</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">request</span><span class="p">,</span>
<span class="w">            </span><span class="nc">HttpResponse</span><span class="p">.</span><span class="nc">BodyHandlers</span><span class="p">.</span><span class="n">ofString</span><span class="p">())</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">statusCode</span><span class="p">())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
</div></blockquote>
<p>This removes the anomaly flags and allows the execution to be included in future baseline calculations.</p>
</section>
<section id="adjusting-thresholds">
<h3>Adjusting Thresholds<a class="headerlink" href="#adjusting-thresholds" title="Link to this heading"></a></h3>
<p>The system provides detailed statistical data to help you fine-tune anomaly detection sensitivity. Each anomaly result includes both the <strong>z-score</strong> (actual deviation) and <strong>z-threshold</strong> (sensitivity setting) to guide adjustments.</p>
</section>
<section id="understanding-the-data">
<h3>Understanding the Data<a class="headerlink" href="#understanding-the-data" title="Link to this heading"></a></h3>
<p><strong>Z-Score vs Z-Threshold:</strong></p>
<ul class="simple">
<li><p><strong>Z-Score</strong>: How many standard deviations the current value is from the historical mean</p></li>
<li><p><strong>Z-Threshold</strong>: Your sensitivity setting (e.g., 2.0 = flag anything beyond 2 standard deviations)</p></li>
<li><p><strong>Relationship</strong>: If <cite>z_score &gt; z_threshold</cite> → Anomaly detected</p></li>
</ul>
</section>
<section id="tuning-process">
<h3>Tuning Process<a class="headerlink" href="#tuning-process" title="Link to this heading"></a></h3>
<p>You are given the pipeline execution id in the alert message. You can utilize this to query the <cite>anomaly_detection_result</cite> table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
<span class="cm">/* Current Values */</span>
<span class="n">adr</span><span class="p">.</span><span class="n">pipeline_execution_id</span><span class="p">,</span>
<span class="k">rule</span><span class="p">.</span><span class="n">metric_field</span><span class="p">,</span>
<span class="n">adr</span><span class="p">.</span><span class="n">violation_value</span><span class="p">,</span>
<span class="n">adr</span><span class="p">.</span><span class="n">historical_mean</span><span class="p">,</span>
<span class="n">adr</span><span class="p">.</span><span class="n">std_deviation_value</span><span class="p">,</span>
<span class="n">adr</span><span class="p">.</span><span class="n">z_threshold</span><span class="p">,</span>
<span class="n">adr</span><span class="p">.</span><span class="n">threshold_min_value</span><span class="p">,</span>
<span class="n">adr</span><span class="p">.</span><span class="n">threshold_max_value</span><span class="p">,</span>

<span class="cm">/* Z-Score for analysis */</span>
<span class="n">adr</span><span class="p">.</span><span class="n">z_score</span><span class="p">,</span>
<span class="n">FLOOR</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">adr</span><span class="p">.</span><span class="n">historical_mean</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">adr</span><span class="p">.</span><span class="n">std_deviation_value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">adr</span><span class="p">.</span><span class="n">z_score</span><span class="p">))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">new_threshold_min_value</span><span class="p">,</span>
<span class="n">adr</span><span class="p">.</span><span class="n">historical_mean</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">adr</span><span class="p">.</span><span class="n">std_deviation_value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">adr</span><span class="p">.</span><span class="n">z_score</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">new_threshold_max_value</span>
<span class="k">FROM</span><span class="w"> </span><span class="k">public</span><span class="p">.</span><span class="n">anomaly_detection_result</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">adr</span>
<span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="k">public</span><span class="p">.</span><span class="n">anomaly_detection_rule</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">rule</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">rule</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adr</span><span class="p">.</span><span class="n">rule_id</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">pipeline_execution_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="w">  </span><span class="cm">/* Grab from Alert */</span>
<span class="w">    </span><span class="k">AND</span><span class="w"> </span><span class="k">rule</span><span class="p">.</span><span class="n">metric_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;DURATION_SECONDS&#39;</span><span class="w">  </span><span class="cm">/* Grab from Alert */</span>
</pre></div>
</div>
<p>This gives you information around how close the <cite>violation_value</cite> was to the threshold and what a new threshold would look like if adjusted to the violation value and its z_score. This gives you an idea of how to adjust the <cite>z_threshold</cite> to mitigate false positives.</p>
</section>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h2>
<section id="id1">
<h3>Rule Configuration<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Start Conservative</strong>: Begin with higher z-thresholds (2.5-3.0)</p></li>
<li><p><strong>Adjust Based on Data</strong>: Lower thresholds as you understand your data patterns</p></li>
<li><p><strong>Multiple Metrics</strong>: Monitor different aspects of pipeline performance</p></li>
<li><p><strong>Sufficient History</strong>: Ensure enough historical data for stable baselines</p></li>
</ul>
</section>
<section id="threshold-selection">
<h3>Threshold Selection<a class="headerlink" href="#threshold-selection" title="Link to this heading"></a></h3>
<p>A good rule of thumb is to start with a z-threshold of 3.0 and a minimum executions of 30.
According to the Central Limit Theorem, 30 executions is enough to get a stable baseline for normal distrbution.</p>
</section>
<section id="monitoring-strategy">
<h3>Monitoring Strategy<a class="headerlink" href="#monitoring-strategy" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Regular Review</strong>: Review anomaly results regularly</p></li>
<li><p><strong>False Positive Management</strong>: Unflag false positives promptly</p></li>
<li><p><strong>Threshold Tuning</strong>: Adjust thresholds based on results</p></li>
<li><p><strong>Alert Fatigue</strong>: Avoid overly sensitive thresholds</p></li>
</ul>
</section>
</section>
<section id="common-scenarios">
<h2>Common Scenarios<a class="headerlink" href="#common-scenarios" title="Link to this heading"></a></h2>
<section id="data-volume-anomalies">
<h3>Data Volume Anomalies<a class="headerlink" href="#data-volume-anomalies" title="Link to this heading"></a></h3>
<p>Detect unusual data volumes:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;pipeline_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metric_field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total_rows&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;z_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;minimum_executions&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="performance-anomalies">
<h3>Performance Anomalies<a class="headerlink" href="#performance-anomalies" title="Link to this heading"></a></h3>
<p>Detect execution time issues:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;pipeline_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metric_field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;duration_seconds&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;z_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;minimum_executions&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="throughput-anomalies">
<h3>Throughput Anomalies<a class="headerlink" href="#throughput-anomalies" title="Link to this heading"></a></h3>
<p>Detect processing speed issues:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;pipeline_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metric_field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;throughput&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;z_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;minimum_executions&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="dml-operation-anomalies">
<h3>DML Operation Anomalies<a class="headerlink" href="#dml-operation-anomalies" title="Link to this heading"></a></h3>
<p>Detect unusual insert/update patterns:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;pipeline_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;metric_field&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;inserts&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;z_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;minimum_executions&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-configuration">
<h2>Advanced Configuration<a class="headerlink" href="#advanced-configuration" title="Link to this heading"></a></h2>
<section id="auto-creation-rules">
<h3>Auto-Creation Rules<a class="headerlink" href="#auto-creation-rules" title="Link to this heading"></a></h3>
<p>Enable automatic rule creation for new pipelines:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">WATCHER_AUTO_CREATE_ANOMALY_DETECTION_RULES</span><span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>This automatically creates default anomaly detection rules for new pipelines.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="address_lineage.html" class="btn btn-neutral float-left" title="Address Lineage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="custom_querying.html" class="btn btn-neutral float-right" title="Custom Database Querying" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Cortland Goffena.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>